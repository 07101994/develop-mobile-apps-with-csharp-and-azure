<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Azure Search - Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure</title>
      
      
      
        <link rel="canonical" href="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/chapter7/search/">
      
      
        <meta name="author" content="Adrian Hall">
      
    
    <meta property="og:url" content="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/chapter7/search/">
    <meta property="og:title" content="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure">
    <meta property="og:image" content="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/chapter7/search//../../">
    <meta name="apple-mobile-web-app-title" content="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-a422ff04cc.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/vs.css">
    
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Chapter 7 - Other Useful Services <i class="icon icon-link"></i>
              
            
          </span>
        
        Azure Search
      </div>
    </div>
    
      
      <div class="button button-twitter" role="button" aria-label="Twitter">
        <a href="https://twitter.com/FizzyInTheHall" title="@FizzyInTheHall on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
      </div>
    
    
      
      <div class="button button-github" role="button" aria-label="GitHub">
        <a href="https://github.com/adrianhall" title="@adrianhall on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
      </div>
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          adrianhall/develop-mobile-apps-with-csharp-and-azure
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Getting Started" href="../..">
      Getting Started
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Chapter 1 - Introduction</span>
    <ul>
      
        
  <li>
    <a class="" title="Your First App - PC Edition" href="../../chapter1/firstapp_pc/">
      Your First App - PC Edition
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Your First App - Mac Edition" href="../../chapter1/firstapp_mac/">
      Your First App - Mac Edition
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 2 - Authentication</span>
    <ul>
      
        
  <li>
    <a class="" title="Concepts" href="../../chapter2/authconcepts/">
      Concepts
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Authentication in the Backend" href="../../chapter2/backend/">
      Authentication in the Backend
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Enterprise Authentication" href="../../chapter2/enterprise/">
      Enterprise Authentication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Social Authentication" href="../../chapter2/social/">
      Social Authentication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Debugging Authentication" href="../../chapter2/debugging/">
      Debugging Authentication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Custom Authentication" href="../../chapter2/custom/">
      Custom Authentication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Claims and Authorization" href="../../chapter2/authorization/">
      Claims and Authorization
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Tokens in Real Apps" href="../../chapter2/realworld/">
      Tokens in Real Apps
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Best Practices" href="../../chapter2/bestpractices/">
      Best Practices
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 3 - Data Access and Offline Sync</span>
    <ul>
      
        
  <li>
    <a class="" title="Concepts" href="../../chapter3/dataconcepts/">
      Concepts
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Implementing Table Controllers" href="../../chapter3/server/">
      Implementing Table Controllers
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Data Projection and Queries" href="../../chapter3/projection/">
      Data Projection and Queries
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="The Mobile Client" href="../../chapter3/client/">
      The Mobile Client
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Relationships" href="../../chapter3/relationships/">
      Relationships
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="The Domain Manager" href="../../chapter3/domainmgr/">
      The Domain Manager
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 4 - Server Side Code</span>
    <ul>
      
        
  <li>
    <a class="" title="Options for Server Code" href="../../chapter4/options/">
      Options for Server Code
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Custom HTTP Endpoints" href="../../chapter4/custom/">
      Custom HTTP Endpoints
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="WebJobs" href="../../chapter4/webjobs/">
      WebJobs
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Functions" href="../../chapter4/functions/">
      Functions
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Recipes" href="../../chapter4/recipes/">
      Recipes
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 5 - Push Notifications</span>
    <ul>
      
        
  <li>
    <a class="" title="Concepts" href="../../chapter5/concepts/">
      Concepts
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Android Push" href="../../chapter5/android/">
      Android Push
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="iOS Push" href="../../chapter5/ios/">
      iOS Push
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Windows Push" href="../../chapter5/windows/">
      Windows Push
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Push Recipes" href="../../chapter5/recipes/">
      Push Recipes
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 6 - Combining Web and Mobile Apps</span>
    <ul>
      
        
  <li>
    <a class="" title="MVC Applications" href="../../chapter6/mvc/">
      MVC Applications
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="jQuery Applications" href="../../chapter6/jquery/">
      jQuery Applications
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Angular Applications" href="../../chapter6/angular/">
      Angular Applications
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="React Applications" href="../../chapter6/react/">
      React Applications
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 7 - Other Useful Services</span>
    <ul>
      
        
  <li>
    <a class="" title="Useful Azure Services" href="../services/">
      Useful Azure Services
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Azure Search" href="./">
      Azure Search
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Configuring Azure Search" href="#configuring-azure-search">
                Configuring Azure Search
              </a>
            </li>
          
            <li class="anchor">
              <a title="Using Azure Search" href="#using-azure-search">
                Using Azure Search
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
        
  <li>
    <a class="" title="Media Services" href="../media/">
      Media Services
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Real-time Notifications" href="../realtime/">
      Real-time Notifications
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 8 - Developing An App</span>
    <ul>
      
        
  <li>
    <a class="" title="The Development Environment" href="../../chapter8/developing/">
      The Development Environment
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Testing your Application" href="../../chapter8/testing/">
      Testing your Application
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 9 - Going to Production</span>
    <ul>
      
        
  <li>
    <a class="" title="Repeatable Deployments" href="../../chapter9/arm/">
      Repeatable Deployments
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Safe Deployments" href="../../chapter9/appsvc/">
      Safe Deployments
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Monitoring" href="../../chapter9/monitoring/">
      Monitoring
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Troubleshooting" href="../../chapter9/troubleshooting/">
      Troubleshooting
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="Xamarin Forms Tips" href="../../xamarin_tips/">
      Xamarin Forms Tips
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Android Developer Notes" href="../../android_appendix/">
      Android Developer Notes
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Visual Studio Extensions" href="../../vs_extensions/">
      Visual Studio Extensions
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="References" href="../../references/">
      References
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Credits" href="../../credits/">
      Credits
    </a>
    
  </li>

          
        </ul>
        
          <hr>
          <span class="section">The author</span>
          <ul>
            
              
              <li>
                <a href="https://twitter.com/FizzyInTheHall" target="_blank" title="@FizzyInTheHall on Twitter">
                  @FizzyInTheHall on Twitter
                </a>
              </li>
            
            
              
              <li>
                <a href="https://github.com/adrianhall" target="_blank" title="@adrianhall on GitHub">
                  @adrianhall on GitHub
                </a>
              </li>
            
          </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="integrating-mobile-search">Integrating Mobile Search<a class="headerlink" href="#integrating-mobile-search" title="Permanent link">&para;</a></h1>
<p>Simple search capabilities can be handled by a little light LINQ usage and a small
search bar.  However, most catalog apps or video apps have search that seems almost
magical in what it produces.  It can handle multiple languages, bad spelling, the
difference between singular and plural spellings.  Once it has a set of matches, the
order of the results is based on relevance to your search query and the app can
highlight and provide additional search queries.</p>
<p>All of this is provided by external search services.  The most commonly used services
are based on <a href="https://lucene.apache.org/">Lucene</a> which is an open-source text search engine library from the
Apache Project.  Azure Search is no exception here.  It provides a nice REST interface
that can be used by your app to provide search results.</p>
<p>In this chapters example, we are going to build something new and it doesn't use Azure
Mobile Apps much at all.  We are going to build a video search engine.  We will have a
number of videos that we will upload.  Those videos will be processed by the backend and
the audio and video content will be analyzed for searchable content.  Our app will be
able to search that content and get some matches back.</p>
<p>To start, I've created a simple Xamarin Forms app with a single view (called Search).
We'll update this app later on as we develop the code.  For now, the code for the app
is on the <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/tree/intro-ch7">GitHub repository</a>.</p>
<h2 id="configuring-azure-search">Configuring Azure Search<a class="headerlink" href="#configuring-azure-search" title="Permanent link">&para;</a></h2>
<p>My project does not depend on Azure Mobile Apps this time (yet).  Create a new Resource
Group, then click on the <strong>+ ADD</strong> button at the top of your resource group and add a
new <strong>Azure Search</strong> resource.  You will have to give it a name which becomes a part of
the URL.  All Azure Search resources are accessed through a https://<em>name</em>.search.windows.net
URL.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Since your users will not be typing the name in, this is a great time to use a GUID
as the name - it fits the naming convention and is guaranteed to be unique.</p>
</div>
<p>The only other decision of note is the <strong>Pricing Tier</strong>.  You will be given the Standard
tier, which covers 15 million documents per partition and up to 12 partitions, with up
to 36 search units for scaling.  It's an awesome production service.  We are not exactly
at that level of need yet.  Fortunately, there is a free tier that covers a single scale
unit, 50MB of storage and 10,000 documents - plenty for testing the service out.</p>
<p><img alt="" src="../img/search-pricing.PNG" /></p>
<p>Click on the <strong>F Free</strong> option, then <strong>Select</strong>, followed by <strong>Create</strong> to create the
resource.  Creation of search resources is very quick - usually less than 15 seconds.</p>
<h3 id="creating-a-search-index">Creating a Search Index<a class="headerlink" href="#creating-a-search-index" title="Permanent link">&para;</a></h3>
<p>Just like Azure Mobile Apps, there is no data in the service yet, so it's fairly useless.  We
need to create an index that can be searched.  For right now, I've got a collection of videos.
These documents are JSON objects that include the following fields:</p>
<ul>
<li>Id</li>
<li>Title</li>
<li>Image</li>
<li>Rating</li>
<li>Release Year</li>
<li>Genre</li>
</ul>
<p>In Azure Search, the model for the objects going into the store need to have a type and you need
to decide on some attributes.  Exactly one field must be a "key" (we'll use the Id for this), and
fields need to be marked Retrievable, Filterable, Sortable, Facetable and/or Searchable.</p>
<ul>
<li>Retrievable - the app can retrieve the field</li>
<li>Sortable - it can be used to sort search results</li>
<li>Filterable - it can be used in filter queries</li>
<li>Searchable - it is a full-text search field</li>
</ul>
<p>The only one I've left out here is "Facet-able".  This allows a field to be used in faceted
navigation.  This is a drill-down mechanism.  If you have been on a web store like Amazon, you
will have seen this feature.  It's generally depicted as a "Refine by" field.  For example, you
may search for cars, but then want to limit the search to only convertibles, then only by red
cars.  Each of these refinements is a facet.  If I added a "genre" to my fields, I could use
faceted navigation.</p>
<p>Back to my model, here it is:</p>
<p>| Field Name | Type | Attributes |
| videoId | Edm.String | Key, Retrievable |
| title | Edm.String | Retrievable, Sortable, Filterable, Searchable |
| image | Edm.String | Retrievable |
| rating | Edm.Double | Retrievable, Sortable, Filterable |
| releaseYear | Edm.Int32 | Retrievable, Sortable, Filterable |
| genre | Collection(Edm.String) | Retrievable, Filterable, Searchable, Facetable |</p>
<p>The types are based on <a href="http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part3-csdl/odata-v4.0-errata03-os-part3-csdl-complete.html#_The_edm:Documentation_Element">OData v4 types</a>.  There are a large number of primitive types.  Unfortunately, Azure
Search only supports <a href="https://docs.microsoft.com/en-us/rest/api/searchservice/Supported-data-types">a subset of these</a>.</p>
<div class="admonition warn">
<p class="admonition-title">Warn</p>
<p>You can't sort by the genre field because it is a collection.  Collections cannot be marked sortable.</p>
</div>
<p>You can create an index via the Azure Portal or with the REST interface.  I'm going to define my
"videos" index with JSON.  Here is the JSON file:</p>
<pre><code class="text">{
    &quot;name&quot;: &quot;videos&quot;,
    &quot;fields&quot;: [
        {
            &quot;name&quot;: &quot;videoId&quot;,
            &quot;type&quot;: &quot;Edm.String&quot;,
            &quot;key&quot;: true,
            &quot;filterable&quot;: false,
            &quot;searchable&quot;: false,
            &quot;sortable&quot;: false,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;title&quot;,
            &quot;type&quot;: &quot;Edm.String&quot;,
            &quot;filterable&quot;: true,
            &quot;searchable&quot;: true,
            &quot;sortable&quot;: true,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;image&quot;,
            &quot;type&quot;: &quot;Edm.String&quot;,
            &quot;filterable&quot;: false,
            &quot;searchable&quot;: false,
            &quot;sortable&quot;: false,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;rating&quot;,
            &quot;type&quot;: &quot;Edm.Double&quot;,
            &quot;filterable&quot;: true,
            &quot;searchable&quot;: false,
            &quot;sortable&quot;: true,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;releaseYear&quot;,
            &quot;type&quot;: &quot;Edm.Int32&quot;,
            &quot;filterable&quot;: true,
            &quot;searchable&quot;: false,
            &quot;sortable&quot;: true,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;genra&quot;,
            &quot;type&quot;: &quot;Collection(Edm.String)&quot;,
            &quot;filterable&quot;: true,
            &quot;searchable&quot;: true,
            &quot;sortable&quot;: false,
            &quot;facetable&quot;: true
        }
    ]
}
</code></pre>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can skip default values.  Searchable and Retrievable default to true, so you only have to specify
them if you want to turn that off.  Similarly, key defaults to false, so you only have to specify the
key on the field that needs it.</p>
</div>
<p>To install this index, you will need the URI of the search service (which you already have) and the API Key.
In the <a href="https://portal.azure.com/">Azure Portal</a>, open your Azure Search resource and click on <strong>Keys</strong>.  You will see the primary
and secondary <strong>ADMIN KEY</strong>.  You can use either one.  Open up Postman and issue a POST to <code>URI/indexes?api-version=2016-09-01</code>.
Set the Content-Type to application/json and add an <code>api-key</code> header set to the admin key.  The content
of the POST should be your JSON object.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You should automate this.  HTTP POSTs can be done via Node or PowerShell scripts.</p>
</div>
<p><img alt="" src="../img/search-createindex.PNG" /></p>
<p>Click on the <strong>SEND</strong> button and you will see the return status of <code>201 Created</code> and an OData v4 document
in the response body giving the full definition of the index.  You will receive a 400 series response with
an error message if something goes wrong.  It's likely to be either a duplicate index or a malformed JSON
object.</p>
<div class="admonition info">
<p class="admonition-title">Free Limits</p>
<p>You can create 1 free Azure Search instance and that supports 3 indices (or collections of documents).</p>
</div>
<h3 id="populating-a-search-index-the-easy-way">Populating a Search Index (the easy way)<a class="headerlink" href="#populating-a-search-index-the-easy-way" title="Permanent link">&para;</a></h3>
<p>There are many ways of populating a search index.  You can do what we are going to do - push data into an
index.  You can, however, also define an indexer that will crawl a data source periodically.  Indexers are
provided for Azure Blob and Table Storage, DocumentDB and SQL Server instances (through Azure SQL or SQL
Server on a VM).</p>
<p>I'm going to use a file from <a href="http://api.androidhive.info/json/movies.json">the Internet</a> to populate the search index. I had to adjust it as the format
for uploading is specific:</p>
<pre><code class="text">{
    &quot;value&quot;: [
        {
            &quot;title&quot;: &quot;Dawn of the Planet of the Apes&quot;,
            &quot;image&quot;: &quot;http://api.androidhive.info/json/movies/1.jpg&quot;,
            &quot;rating&quot;: 8.3,
            &quot;releaseYear&quot;: 2014,
            &quot;genre&quot;: [
                &quot;Action&quot;,
                &quot;Drama&quot;,
                &quot;Sci-Fi&quot;
            ],
            &quot;@search.action&quot;: &quot;upload&quot;,
            &quot;videoId&quot;: &quot;98ebe557-894c-48de-b61c-718f78b2adbb&quot;
        },
        {
            &quot;title&quot;: &quot;District 9&quot;,
            &quot;image&quot;: &quot;http://api.androidhive.info/json/movies/2.jpg&quot;,
            &quot;rating&quot;: 8,
            &quot;releaseYear&quot;: 2009,
            &quot;genre&quot;: [
                &quot;Action&quot;,
                &quot;Sci-Fi&quot;,
                &quot;Thriller&quot;
            ],
            &quot;@search.action&quot;: &quot;upload&quot;,
            &quot;videoId&quot;: &quot;e9d89038-386b-4aaa-a36c-530e2f3587c9&quot;
        },
        ...
    ]
}
</code></pre>

<p>I can upload this document just like the creation of the index.  The only difference is that I am POSTing
to /indexes/videos/docs/index:</p>
<p><img alt="" src="../img/search-createdoc.PNG" /></p>
<p>If you see a <strong>200 OK</strong>, then all the documents were uploaded and accepted.  If you see a <strong>207</strong> message,
then some of the documents were not uploaded.  In that case, look at the response - each document will be
referenced by the key field (in our case, the videoId field), the status field will be false and there will
be an errorMessage field which contains the problem.  You can correct the problem and upload just that
document.</p>
<p>There are four values for the <strong>@search.action</strong> field - normally, you will want to use "upload" for new
documents and "mergeOrUpload" for subsequent updates.</p>
<h3 id="testing-azure-search">Testing Azure Search<a class="headerlink" href="#testing-azure-search" title="Permanent link">&para;</a></h3>
<p>Now that we have a few documents indexed, we can test the search facility.  Go to the Overview page of your
search service.  The indices are listed on the overview page and you can click on the videos index.</p>
<p><img alt="" src="../img/search-overview.PNG" /></p>
<p>You can then click on the Search Explorer to get into the test facility.  Let's start with a fairly basic
search for the word "of" across all searchable fields:</p>
<p><img alt="" src="../img/search-all-of.PNG" /></p>
<p>We can also do boolean searches.  For example, let's do the same search, but finding only comedies:</p>
<p><img alt="" src="../img/search-of-comedy.PNG" /></p>
<p>Azure Search can accept a simple search string (as we have done here), an <a href="https://docs.microsoft.com/en-us/rest/api/searchservice/odata-expression-syntax-for-azure-search">OData Filter</a> using a restricted
set of search criteria, or <a href="https://docs.microsoft.com/en-us/rest/api/searchservice/lucene-query-syntax-in-azure-search">Lucene Search Syntax</a>.  The search explorer allows you to explore the various
search mechanisms and their (sometimes peculiar) syntax.</p>
<h2 id="using-azure-search">Using Azure Search<a class="headerlink" href="#using-azure-search" title="Permanent link">&para;</a></h2>
<!-- Images -->

<!-- Links -->
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../services/" title="Useful Azure Services">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Useful Azure Services
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../media/" title="Media Services">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Media Services
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = 'adrianhall/develop-mobile-apps-with-csharp-and-azure';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
      <script src="../../js/highlight.pack.js"></script>
    
    
  </body>
</html>