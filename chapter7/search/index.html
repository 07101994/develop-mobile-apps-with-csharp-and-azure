
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/chapter7/search/">
      
      
        <meta name="author" content="Adrian Hall">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      
      <meta name="generator" content="mkdocs+mkdocs-material#1.0.1">
    
    
      
        <title>Azure Search - Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-facb31f4a3.js"></script>
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-e0a21a99ab.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-02ce7adcc2.palette.css">
      
      
        <link rel="stylesheet" href="../../css/extra.css">
      
        <link rel="stylesheet" href="../../css/vs.css">
      
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="red" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" class=" md-icon md-icon--home  md-header-nav__button">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Chapter 7 - Other Useful Services
                </span>
              
            
            Azure Search
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            
              


  


  <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

            
          </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <i class=" md-icon md-icon--home  md-nav__button">
      
    </i>
    Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  <li class="md-nav__item">
    
      <a href="../.." title="Getting Started" class="md-nav__link">
        Getting Started
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Chapter 1 - Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-2">
        Chapter 1 - Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter1/firstapp_pc/" title="Your First App - PC Edition" class="md-nav__link">
        Your First App - PC Edition
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter1/firstapp_mac/" title="Your First App - Mac Edition" class="md-nav__link">
        Your First App - Mac Edition
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Chapter 2 - Authentication
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3">
        Chapter 2 - Authentication
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter2/authconcepts/" title="Concepts" class="md-nav__link">
        Concepts
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter2/backend/" title="Authentication in the Backend" class="md-nav__link">
        Authentication in the Backend
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter2/enterprise/" title="Enterprise Authentication" class="md-nav__link">
        Enterprise Authentication
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter2/social/" title="Social Authentication" class="md-nav__link">
        Social Authentication
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter2/debugging/" title="Debugging Authentication" class="md-nav__link">
        Debugging Authentication
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter2/custom/" title="Custom Authentication" class="md-nav__link">
        Custom Authentication
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter2/authorization/" title="Claims and Authorization" class="md-nav__link">
        Claims and Authorization
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter2/realworld/" title="Tokens in Real Apps" class="md-nav__link">
        Tokens in Real Apps
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter2/bestpractices/" title="Best Practices" class="md-nav__link">
        Best Practices
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Chapter 3 - Data Access and Offline Sync
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4">
        Chapter 3 - Data Access and Offline Sync
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter3/dataconcepts/" title="Concepts" class="md-nav__link">
        Concepts
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter3/server/" title="Implementing Table Controllers" class="md-nav__link">
        Implementing Table Controllers
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter3/projection/" title="Data Projection and Queries" class="md-nav__link">
        Data Projection and Queries
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter3/client/" title="The Mobile Client" class="md-nav__link">
        The Mobile Client
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter3/relationships/" title="Relationships" class="md-nav__link">
        Relationships
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter3/domainmgr/" title="The Domain Manager" class="md-nav__link">
        The Domain Manager
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Chapter 4 - Server Side Code
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5">
        Chapter 4 - Server Side Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter4/options/" title="Options for Server Code" class="md-nav__link">
        Options for Server Code
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter4/custom/" title="Custom HTTP Endpoints" class="md-nav__link">
        Custom HTTP Endpoints
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter4/webjobs/" title="WebJobs" class="md-nav__link">
        WebJobs
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter4/functions/" title="Functions" class="md-nav__link">
        Functions
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter4/recipes/" title="Recipes" class="md-nav__link">
        Recipes
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Chapter 5 - Push Notifications
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6">
        Chapter 5 - Push Notifications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter5/concepts/" title="Concepts" class="md-nav__link">
        Concepts
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter5/android/" title="Android Push" class="md-nav__link">
        Android Push
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter5/ios/" title="iOS Push" class="md-nav__link">
        iOS Push
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter5/windows/" title="Windows Push" class="md-nav__link">
        Windows Push
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter5/recipes/" title="Push Recipes" class="md-nav__link">
        Push Recipes
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Chapter 6 - Combining Web and Mobile Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-7">
        Chapter 6 - Combining Web and Mobile Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter6/mvc/" title="MVC Applications" class="md-nav__link">
        MVC Applications
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter6/jquery/" title="jQuery Applications" class="md-nav__link">
        jQuery Applications
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter6/angular/" title="Angular Applications" class="md-nav__link">
        Angular Applications
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter6/react/" title="React Applications" class="md-nav__link">
        React Applications
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Chapter 7 - Other Useful Services
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-8">
        Chapter 7 - Other Useful Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../services/" title="Useful Azure Services" class="md-nav__link">
        Useful Azure Services
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Azure Search
      </label>
    
    <a href="./" title="Azure Search" class="md-nav__link md-nav__link--active">
      Azure Search
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-azure-search" title="Configuring Azure Search" class="md-nav__link">
    Configuring Azure Search
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-search-index" title="Creating a Search Index" class="md-nav__link">
    Creating a Search Index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populating-a-search-index-the-easy-way" title="Populating a Search Index (the easy way)" class="md-nav__link">
    Populating a Search Index (the easy way)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-azure-search" title="Testing Azure Search" class="md-nav__link">
    Testing Azure Search
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-azure-search" title="Using Azure Search" class="md-nav__link">
    Using Azure Search
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../media/" title="Media Services" class="md-nav__link">
        Media Services
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../realtime/" title="Real-time Notifications" class="md-nav__link">
        Real-time Notifications
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Chapter 8 - Developing An App
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-9">
        Chapter 8 - Developing An App
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter8/developing/" title="The Development Environment" class="md-nav__link">
        The Development Environment
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter8/testing/" title="Testing your Application" class="md-nav__link">
        Testing your Application
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Chapter 9 - Going to Production
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-10">
        Chapter 9 - Going to Production
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter9/arm/" title="Repeatable Deployments" class="md-nav__link">
        Repeatable Deployments
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter9/appsvc/" title="Safe Deployments" class="md-nav__link">
        Safe Deployments
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter9/monitoring/" title="Monitoring" class="md-nav__link">
        Monitoring
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../chapter9/troubleshooting/" title="Troubleshooting" class="md-nav__link">
        Troubleshooting
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../xamarin_tips/" title="Xamarin Forms Tips" class="md-nav__link">
        Xamarin Forms Tips
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../android_appendix/" title="Android Developer Notes" class="md-nav__link">
        Android Developer Notes
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../vs_extensions/" title="Visual Studio Extensions" class="md-nav__link">
        Visual Studio Extensions
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../references/" title="References" class="md-nav__link">
        References
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../credits/" title="Credits" class="md-nav__link">
        Credits
      </a>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-azure-search" title="Configuring Azure Search" class="md-nav__link">
    Configuring Azure Search
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-search-index" title="Creating a Search Index" class="md-nav__link">
    Creating a Search Index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populating-a-search-index-the-easy-way" title="Populating a Search Index (the easy way)" class="md-nav__link">
    Populating a Search Index (the easy way)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-azure-search" title="Testing Azure Search" class="md-nav__link">
    Testing Azure Search
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-azure-search" title="Using Azure Search" class="md-nav__link">
    Using Azure Search
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
                 <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/edit/master/docs/chapter7\search.md" title="Edit this page" class="md-icon md-content__edit">edit</a>
               
              
                
                <h1 id="integrating-mobile-search">Integrating Mobile Search<a class="headerlink" href="#integrating-mobile-search" title="Permanent link">&para;</a></h1>
<p>Simple search capabilities can be handled by a little light LINQ usage and a small
search bar.  However, most catalog apps or video apps have search that seems almost
magical in what it produces.  It can handle multiple languages, bad spelling, the
difference between singular and plural spellings.  Once it has a set of matches, the
order of the results is based on relevance to your search query and the app can
highlight and provide additional search queries.</p>
<p>All of this is provided by external search services.  The most commonly used services
are based on <a href="https://lucene.apache.org/">Lucene</a> which is an open-source text search engine library from the
Apache Project.  Azure Search is no exception here.  It provides a nice REST interface
that can be used by your app to provide search results.</p>
<p>In this chapters example, we are going to build something new and it doesn't use Azure
Mobile Apps much at all.  We are going to build a video search engine.  We will have a
number of videos that we will upload.  Those videos will be processed by the backend and
the audio and video content will be analyzed for searchable content.  Our app will be
able to search that content and get some matches back.</p>
<p>To start, I've created a simple Xamarin Forms app with a single view (called Search).
We'll update this app later on as we develop the code.  For now, the code for the app
is on the <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/tree/intro-ch7">GitHub repository</a>.</p>
<h2 id="configuring-azure-search">Configuring Azure Search<a class="headerlink" href="#configuring-azure-search" title="Permanent link">&para;</a></h2>
<p>My project does not depend on Azure Mobile Apps this time (yet).  Create a new Resource
Group, then click on the <strong>+ ADD</strong> button at the top of your resource group and add a
new <strong>Azure Search</strong> resource.  You will have to give it a name which becomes a part of
the URL.  All Azure Search resources are accessed through a https://<em>name</em>.search.windows.net
URL.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Since your users will not be typing the name in, this is a great time to use a GUID
as the name - it fits the naming convention and is guaranteed to be unique.</p>
</div>
<p>The only other decision of note is the <strong>Pricing Tier</strong>.  You will be given the Standard
tier, which covers 15 million documents per partition and up to 12 partitions, with up
to 36 search units for scaling.  It's an awesome production service.  We are not exactly
at that level of need yet.  Fortunately, there is a free tier that covers a single scale
unit, 50MB of storage and 10,000 documents - plenty for testing the service out.</p>
<p><img alt="" src="../img/search-pricing.PNG" /></p>
<p>Click on the <strong>F Free</strong> option, then <strong>Select</strong>, followed by <strong>Create</strong> to create the
resource.  Creation of search resources is very quick - usually less than 15 seconds.</p>
<h3 id="creating-a-search-index">Creating a Search Index<a class="headerlink" href="#creating-a-search-index" title="Permanent link">&para;</a></h3>
<p>Just like Azure Mobile Apps, there is no data in the service yet, so it's fairly useless.  We
need to create an index that can be searched.  For right now, I've got a collection of videos.
These documents are JSON objects that include the following fields:</p>
<ul>
<li>Id</li>
<li>Title</li>
<li>Image</li>
<li>Rating</li>
<li>Release Year</li>
<li>Genre</li>
</ul>
<p>In Azure Search, the model for the objects going into the store need to have a type and you need
to decide on some attributes.  Exactly one field must be a "key" (we'll use the Id for this), and
fields need to be marked Retrievable, Filterable, Sortable, Facetable and/or Searchable.</p>
<ul>
<li>Retrievable - the app can retrieve the field</li>
<li>Sortable - it can be used to sort search results</li>
<li>Filterable - it can be used in filter queries</li>
<li>Searchable - it is a full-text search field</li>
</ul>
<p>The only one I've left out here is "Facet-able".  This allows a field to be used in faceted
navigation.  This is a drill-down mechanism.  If you have been on a web store like Amazon, you
will have seen this feature.  It's generally depicted as a "Refine by" field.  For example, you
may search for cars, but then want to limit the search to only convertibles, then only by red
cars.  Each of these refinements is a facet.  If I added a "genre" to my fields, I could use
faceted navigation.</p>
<p>Back to my model, here it is:</p>
<table>
<thead>
<tr>
<th>Field Name</th>
<th>Type</th>
<th>Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td>videoId</td>
<td>Edm.String</td>
<td>Key, Retrievable</td>
</tr>
<tr>
<td>title</td>
<td>Edm.String</td>
<td>Retrievable, Sortable, Filterable, Searchable</td>
</tr>
<tr>
<td>image</td>
<td>Edm.String</td>
<td>Retrievable</td>
</tr>
<tr>
<td>rating</td>
<td>Edm.Double</td>
<td>Retrievable, Sortable, Filterable</td>
</tr>
<tr>
<td>releaseYear</td>
<td>Edm.Int32</td>
<td>Retrievable, Sortable, Filterable</td>
</tr>
<tr>
<td>genre</td>
<td>Collection(Edm.String)</td>
<td>Retrievable, Filterable, Searchable, Facetable</td>
</tr>
</tbody>
</table>
<p>The types are based on <a href="http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part3-csdl/odata-v4.0-errata03-os-part3-csdl-complete.html#_The_edm:Documentation_Element">OData v4 types</a>.  There are a large number of primitive types.  Unfortunately, Azure
Search only supports <a href="https://docs.microsoft.com/en-us/rest/api/searchservice/Supported-data-types">a subset of these</a>.</p>
<div class="admonition warn">
<p class="admonition-title">Warn</p>
<p>You can't sort by the genre field because it is a collection.  Collections cannot be marked sortable.</p>
</div>
<p>You can create an index via the Azure Portal or with the REST interface.  I'm going to define my
"videos" index with JSON.  Here is the JSON file:</p>
<pre><code class="text">{
    &quot;name&quot;: &quot;videos&quot;,
    &quot;fields&quot;: [
        {
            &quot;name&quot;: &quot;videoId&quot;,
            &quot;type&quot;: &quot;Edm.String&quot;,
            &quot;key&quot;: true,
            &quot;filterable&quot;: false,
            &quot;searchable&quot;: false,
            &quot;sortable&quot;: false,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;title&quot;,
            &quot;type&quot;: &quot;Edm.String&quot;,
            &quot;filterable&quot;: true,
            &quot;searchable&quot;: true,
            &quot;sortable&quot;: true,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;image&quot;,
            &quot;type&quot;: &quot;Edm.String&quot;,
            &quot;filterable&quot;: false,
            &quot;searchable&quot;: false,
            &quot;sortable&quot;: false,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;rating&quot;,
            &quot;type&quot;: &quot;Edm.Double&quot;,
            &quot;filterable&quot;: true,
            &quot;searchable&quot;: false,
            &quot;sortable&quot;: true,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;releaseYear&quot;,
            &quot;type&quot;: &quot;Edm.Int32&quot;,
            &quot;filterable&quot;: true,
            &quot;searchable&quot;: false,
            &quot;sortable&quot;: true,
            &quot;facetable&quot;: false
        },
        {
            &quot;name&quot;: &quot;genra&quot;,
            &quot;type&quot;: &quot;Collection(Edm.String)&quot;,
            &quot;filterable&quot;: true,
            &quot;searchable&quot;: true,
            &quot;sortable&quot;: false,
            &quot;facetable&quot;: true
        }
    ]
}
</code></pre>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can skip default values.  Searchable and Retrievable default to true, so you only have to specify
them if you want to turn that off.  Similarly, key defaults to false, so you only have to specify the
key on the field that needs it.</p>
</div>
<p>To install this index, you will need the URI of the search service (which you already have) and the API Key.
In the <a href="https://portal.azure.com/">Azure Portal</a>, open your Azure Search resource and click on <strong>Keys</strong>.  You will see the primary
and secondary <strong>ADMIN KEY</strong>.  You can use either one.  Open up Postman and issue a POST to <code>URI/indexes?api-version=2016-09-01</code>.
Set the Content-Type to application/json and add an <code>api-key</code> header set to the admin key.  The content
of the POST should be your JSON object.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You should automate this.  HTTP POSTs can be done via Node or PowerShell scripts.</p>
</div>
<p><img alt="" src="../img/search-createindex.PNG" /></p>
<p>Click on the <strong>SEND</strong> button and you will see the return status of <code>201 Created</code> and an OData v4 document
in the response body giving the full definition of the index.  You will receive a 400 series response with
an error message if something goes wrong.  It's likely to be either a duplicate index or a malformed JSON
object.</p>
<div class="admonition info">
<p class="admonition-title">Free Limits</p>
<p>You can create 1 free Azure Search instance and that supports 3 indices (or collections of documents).</p>
</div>
<h3 id="populating-a-search-index-the-easy-way">Populating a Search Index (the easy way)<a class="headerlink" href="#populating-a-search-index-the-easy-way" title="Permanent link">&para;</a></h3>
<p>There are many ways of populating a search index.  You can do what we are going to do - push data into an
index.  You can, however, also define an indexer that will crawl a data source periodically.  Indexers are
provided for Azure Blob and Table Storage, DocumentDB and SQL Server instances (through Azure SQL or SQL
Server on a VM).</p>
<p>I'm going to use a file from <a href="http://api.androidhive.info/json/movies.json">the Internet</a> to populate the search index. I had to adjust it as the format
for uploading is specific:</p>
<pre><code class="text">{
    &quot;value&quot;: [
        {
            &quot;title&quot;: &quot;Dawn of the Planet of the Apes&quot;,
            &quot;image&quot;: &quot;http://api.androidhive.info/json/movies/1.jpg&quot;,
            &quot;rating&quot;: 8.3,
            &quot;releaseYear&quot;: 2014,
            &quot;genre&quot;: [
                &quot;Action&quot;,
                &quot;Drama&quot;,
                &quot;Sci-Fi&quot;
            ],
            &quot;@search.action&quot;: &quot;upload&quot;,
            &quot;videoId&quot;: &quot;98ebe557-894c-48de-b61c-718f78b2adbb&quot;
        },
        {
            &quot;title&quot;: &quot;District 9&quot;,
            &quot;image&quot;: &quot;http://api.androidhive.info/json/movies/2.jpg&quot;,
            &quot;rating&quot;: 8,
            &quot;releaseYear&quot;: 2009,
            &quot;genre&quot;: [
                &quot;Action&quot;,
                &quot;Sci-Fi&quot;,
                &quot;Thriller&quot;
            ],
            &quot;@search.action&quot;: &quot;upload&quot;,
            &quot;videoId&quot;: &quot;e9d89038-386b-4aaa-a36c-530e2f3587c9&quot;
        },
        ...
    ]
}
</code></pre>

<p>I can upload this document just like the creation of the index.  The only difference is that I am POSTing
to /indexes/videos/docs/index:</p>
<p><img alt="" src="../img/search-createdoc.PNG" /></p>
<p>If you see a <strong>200 OK</strong>, then all the documents were uploaded and accepted.  If you see a <strong>207</strong> message,
then some of the documents were not uploaded.  In that case, look at the response - each document will be
referenced by the key field (in our case, the videoId field), the status field will be false and there will
be an errorMessage field which contains the problem.  You can correct the problem and upload just that
document.</p>
<p>There are four values for the <strong>@search.action</strong> field - normally, you will want to use "upload" for new
documents and "mergeOrUpload" for subsequent updates.</p>
<h3 id="testing-azure-search">Testing Azure Search<a class="headerlink" href="#testing-azure-search" title="Permanent link">&para;</a></h3>
<p>Now that we have a few documents indexed, we can test the search facility.  Go to the Overview page of your
search service.  The indices are listed on the overview page and you can click on the videos index.</p>
<p><img alt="" src="../img/search-overview.PNG" /></p>
<p>You can then click on the Search Explorer to get into the test facility.  Let's start with a fairly basic
search for the word "of" across all searchable fields:</p>
<p><img alt="" src="../img/search-all-of.PNG" /></p>
<p>We can also do boolean searches.  For example, let's do the same search, but finding only comedies:</p>
<p><img alt="" src="../img/search-of-comedy.PNG" /></p>
<p>Azure Search can accept a simple search string (as we have done here), an <a href="https://docs.microsoft.com/en-us/rest/api/searchservice/odata-expression-syntax-for-azure-search">OData Filter</a> using a restricted
set of search criteria, or <a href="https://docs.microsoft.com/en-us/rest/api/searchservice/lucene-query-syntax-in-azure-search">Lucene Search Syntax</a>.  The search explorer allows you to explore the various
search mechanisms and their (sometimes peculiar) syntax.</p>
<h2 id="using-azure-search">Using Azure Search<a class="headerlink" href="#using-azure-search" title="Permanent link">&para;</a></h2>
<!-- Images -->

<!-- Links -->
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../services/" title="Useful Azure Services" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Useful Azure Services
              </span>
            </div>
          </a>
        
        
          <a href="../media/" title="Media Services" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Media Services
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-16f434a21a.js"></script>
      <script>var config={url:{base:"../.."}},app=new Application(config);app.initialize()</script>
      
        <script src="../../js/highlight.pack.js"></script>
      
    
    
      
    
  </body>
</html>