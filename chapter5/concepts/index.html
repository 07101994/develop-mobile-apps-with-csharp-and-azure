<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Concepts - Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure</title>
      
      
      
        <link rel="canonical" href="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/chapter5/concepts/">
      
      
        <meta name="author" content="Adrian Hall">
      
    
    <meta property="og:url" content="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/chapter5/concepts/">
    <meta property="og:title" content="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure">
    <meta property="og:image" content="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/chapter5/concepts//../../">
    <meta name="apple-mobile-web-app-title" content="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-a422ff04cc.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/vs.css">
    
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Chapter 5 - Push Notifications <i class="icon icon-link"></i>
              
            
          </span>
        
        Concepts
      </div>
    </div>
    
      
      <div class="button button-twitter" role="button" aria-label="Twitter">
        <a href="https://twitter.com/FizzyInTheHall" title="@FizzyInTheHall on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
      </div>
    
    
      
      <div class="button button-github" role="button" aria-label="GitHub">
        <a href="https://github.com/adrianhall" title="@adrianhall on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
      </div>
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          adrianhall/develop-mobile-apps-with-csharp-and-azure
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Getting Started" href="../..">
      Getting Started
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Chapter 1 - Introduction</span>
    <ul>
      
        
  <li>
    <a class="" title="Your First App - PC Edition" href="../../chapter1/firstapp_pc/">
      Your First App - PC Edition
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Your First App - Mac Edition" href="../../chapter1/firstapp_mac/">
      Your First App - Mac Edition
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 2 - Authentication</span>
    <ul>
      
        
  <li>
    <a class="" title="Concepts" href="../../chapter2/authconcepts/">
      Concepts
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Authentication in the Backend" href="../../chapter2/backend/">
      Authentication in the Backend
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Enterprise Authentication" href="../../chapter2/enterprise/">
      Enterprise Authentication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Social Authentication" href="../../chapter2/social/">
      Social Authentication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Debugging Authentication" href="../../chapter2/debugging/">
      Debugging Authentication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Custom Authentication" href="../../chapter2/custom/">
      Custom Authentication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Claims and Authorization" href="../../chapter2/authorization/">
      Claims and Authorization
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Tokens in Real Apps" href="../../chapter2/realworld/">
      Tokens in Real Apps
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Best Practices" href="../../chapter2/bestpractices/">
      Best Practices
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 3 - Data Access and Offline Sync</span>
    <ul>
      
        
  <li>
    <a class="" title="Concepts" href="../../chapter3/dataconcepts/">
      Concepts
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Implementing Table Controllers" href="../../chapter3/server/">
      Implementing Table Controllers
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Data Projection and Queries" href="../../chapter3/projection/">
      Data Projection and Queries
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="The Mobile Client" href="../../chapter3/client/">
      The Mobile Client
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Relationships" href="../../chapter3/relationships/">
      Relationships
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="The Domain Manager" href="../../chapter3/domainmgr/">
      The Domain Manager
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 4 - Server Side Code</span>
    <ul>
      
        
  <li>
    <a class="" title="Options for Server Code" href="../../chapter4/options/">
      Options for Server Code
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Custom HTTP Endpoints" href="../../chapter4/custom/">
      Custom HTTP Endpoints
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="WebJobs" href="../../chapter4/webjobs/">
      WebJobs
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Functions" href="../../chapter4/functions/">
      Functions
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Recipes" href="../../chapter4/recipes/">
      Recipes
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 5 - Push Notifications</span>
    <ul>
      
        
  <li>
    <a class="current" title="Concepts" href="./">
      Concepts
    </a>
    
      
      
        <ul>
          
            <li class="anchor">
              <a title="How Push Notifications Works" href="#how-push-notifications-works">
                How Push Notifications Works
              </a>
            </li>
          
            <li class="anchor">
              <a title="Introducing Notification Hubs" href="#introducing-notification-hubs">
                Introducing Notification Hubs
              </a>
            </li>
          
            <li class="anchor">
              <a title="Configuring Notification Hubs" href="#configuring-notification-hubs">
                Configuring Notification Hubs
              </a>
            </li>
          
            <li class="anchor">
              <a title="Configuring Push Registration" href="#configuring-push-registration">
                Configuring Push Registration
              </a>
            </li>
          
            <li class="anchor">
              <a title="Next Steps" href="#next-steps">
                Next Steps
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
        
  <li>
    <a class="" title="Android Push" href="../android/">
      Android Push
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="iOS Push" href="../ios/">
      iOS Push
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Windows Push" href="../windows/">
      Windows Push
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Testing Push" href="../testing/">
      Testing Push
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Push Recipes" href="../recipes/">
      Push Recipes
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 6 - Combining Web and Mobile Apps</span>
    <ul>
      
        
  <li>
    <a class="" title="MVC Applications" href="../../chapter6/mvc/">
      MVC Applications
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="SPA Applications" href="../../chapter6/spa/">
      SPA Applications
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 7 - Other Useful Services</span>
    <ul>
      
        
  <li>
    <a class="" title="Azure Search" href="../../chapter7/search/">
      Azure Search
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Media Services" href="../../chapter7/media/">
      Media Services
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Real-time Notifications" href="../../chapter7/realtime/">
      Real-time Notifications
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 8 - Developing An App</span>
    <ul>
      
        
  <li>
    <a class="" title="The Development Environment" href="../../chapter8/developing/">
      The Development Environment
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Testing your Application" href="../../chapter8/testing/">
      Testing your Application
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Chapter 9 - Going to Production</span>
    <ul>
      
        
  <li>
    <a class="" title="Repeatable Deployments" href="../../chapter9/arm/">
      Repeatable Deployments
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Safe Deployments" href="../../chapter9/appsvc/">
      Safe Deployments
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Monitoring" href="../../chapter9/monitoring/">
      Monitoring
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Troubleshooting" href="../../chapter9/troubleshooting/">
      Troubleshooting
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="Xamarin Forms Tips" href="../../xamarin_tips/">
      Xamarin Forms Tips
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Android Developer Notes" href="../../android_appendix/">
      Android Developer Notes
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="References" href="../../references/">
      References
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Credits" href="../../credits/">
      Credits
    </a>
    
  </li>

          
        </ul>
        
          <hr>
          <span class="section">The author</span>
          <ul>
            
              
              <li>
                <a href="https://twitter.com/FizzyInTheHall" target="_blank" title="@FizzyInTheHall on Twitter">
                  @FizzyInTheHall on Twitter
                </a>
              </li>
            
            
              
              <li>
                <a href="https://github.com/adrianhall" target="_blank" title="@adrianhall on GitHub">
                  @adrianhall on GitHub
                </a>
              </li>
            
          </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
            <h1>Concepts</h1>
          
          <p>Thus far, we've looked at options for communicating with the backend while the client is running.  Nothing happens 
within the mobile client until and unless the mobile client is visible and running.  When the user changes apps, the 
client is suspended or placed on a low priority background thread.  No user interaction is possible.</p>
<p>Most developers have a need to communicate interesting things to the user, which can't happen if the app isn't 
running.  Fortunately, the major mobile platform providers have implemented some form of push notifications.</p>
<p>Push notifications are messages that are sent to your mobile client irrespective of whether the app is running or 
not.  The mobile device will wake up your app to deliver the message.  You have probably seen many examples of push 
notifications in your daily mobile phone usage.  There are several uses, but they fall into two broad areas.  Marketing 
messages are sent to inform the user of the app of something.  Perhaps it's a new version, or a specific promotion for 
your favorite store.  Silent notifications are sent to inform the app that something important has happened.  For 
example, you may want to send a message when a data element has been updated in a table.  Silent notifications are
generally not to be seen by the user.</p>
<p>Delivery of these messages comes with some signficant penalties.  You cannot guarantee the delivery of a message.  The 
user of the device decides whether to accept messages or not.  You cannot guarantee a delivery time, even though most 
messages are delivered within a couple of minutes.  Finally, there is no built in acknowledgement of the message.  You 
have to do something extra in code to ensure the delivery happens.</p>
<h2 id="how-push-notifications-works">How Push Notifications Works<a class="headerlink" href="#how-push-notifications-works" title="Permanent link">&para;</a></h2>
<p>Each platform provider provides their own push notification service.  For example, iOS uses <em>Apple Push Notification 
Service (APNS)</em>.  Google uses <em>Firebase Communications Manager (FCM)</em>.  This used to be called Google Communications 
Manager or GCM.  It's the same service; just rebranded.  Newer versions of Windows (including Universal Windows) use 
<em>Windows Notification Service (WNS)</em> whereas older versions of Windows Phone used <em>Microsoft Platform Notification 
Service (MPNS)</em>.  There are other push notification services, for example, for FireOS (run by Amazon) and China (run 
by Baidu).</p>
<p>In all cases, the process is the same:</p>
<p><img alt="" src="../img/push-architecture.PNG" /></p>
<p>The mobile device initiates the process, registering with the Platform Notification Service (PNS).  It will receive a 
<strong>Registration ID</strong> in return. The registration ID is specific to an app running on a specific device. Once you have 
the registration ID, you will pass that registration ID to your backend.  The backend will use the registration ID 
when communicating with the PNS to send your app messages.</p>
<p>This is where complexity rears its ugly head.  Without an intervening service, the backend will need to do the 
following:</p>
<ul>
<li>Store the registration ID and PNS in a database for later reference.</li>
<li>When a message is to be sent, lookup the list of registration IDs on a per-PNS basis and send the message in batches.</li>
<li>Handle retry, incremental back-off, throttling and tracking for each message.</li>
<li>Deal with registration failure and maintenance of the database.</li>
</ul>
<p>This is just the start of the functionality.  In general, marketeers will want tracking of the messages (such as how 
many were opened or acted on, what demographics were the opened messages, etc.) and they will want to push to only a 
subset of users, targetted by opt-in lists or other demographic information.  </p>
<h2 id="introducing-notification-hubs">Introducing Notification Hubs<a class="headerlink" href="#introducing-notification-hubs" title="Permanent link">&para;</a></h2>
<p>Developing a system for pushing notifications to devices is a significant undertaking.  I would not recommend anyone
undertake such a service for their app.  Fortunately, there are a number of services that can do this for you.  Azures 
entry into this space is <a href="https://azure.com/something-something-something">Azure Notification Hubs</a>.  Notification Hubs (or NH as we will call it) handles all the 
registration and bulk sending logic to allow you to send a single message to multiple recipients without having to 
worry about what platform they are on.  In addition, NH has support for tagging individual device registrations with 
information about the user, groups, or opt-in lists.</p>
<p>Azure Mobile Apps has direct support for Notification Hubs within the client SDK and Azure App Service has a 
registration service built right in for NH, allowing you to easily integrate your mobile app with the facilities 
that NH provides.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You do not have to run Azure Mobile Apps or Azure App Service to use Notification Hubs.  You do need to have a 
registration service somewhere.  However, Notification Hubs is a standalone service.</p>
</div>
<p>Notification Hubs has two features that are important in mobile push scenarios - tags and templates.  while
you will see these two features a lot in this chapter, we will also use other features of Notification Hubs,
such as Scheduled Push, Geofenced Push and Analytics.</p>
<h3 id="tags">Tags<a class="headerlink" href="#tags" title="Permanent link">&para;</a></h3>
<p>When a device registers itself with Notification Hubs (via the registration endpoint), you can specify a number
of tags that are associated with the device.  The tag allows you to segment the devices and push a message to 
only a portion of the devices.  Technically, a tag is a string.  The string can be up to 120 characters long, but
has a restricted character set (alphanumeric plus 6 other characters).  </p>
<p>You can use tags to allow the user to register interest in a topic, or register on their behalf based on just
about anything you want.  If you want to push to a department or users in a specific location, you can automatically
register for those tags within the registration service.  You can also use tags to do "user tagging" - allowing 
you to push to a user ID or email address instead of a device ID.</p>
<p>When sending a push notification, you can broadcast a message to everyone, but it's generally better to send
to a tag.  You can also combine tags with boolean operations.  For example, you might want to push a Marketing
message to all sales people in Washington with <code>(state:Washington &amp;&amp; dept:Sales)</code>.  Tag expressions like this
are limited in the number of tags allowed.</p>
<h3 id="templates">Templates<a class="headerlink" href="#templates" title="Permanent link">&para;</a></h3>
<p>There are multiple plaform notification systems and each one wants a message sent to them in a specific format.
APNS and FCM require a JSON payload (each of which is different), while WNS requires an XML payload.  Effectively,
this makes the backend of your app responsible for a part of the presentation layer, which is something that has
been avoided thus far.  In addition, you might want to localize the message for your audience and potentially use
string replacement to customize the message for the recipient.</p>
<p>Templates provide a way to send cross-platform notifications and customize the message for each recipient.  You
can use locale files to insert locale-specific messages into the template.</p>
<h2 id="configuring-notification-hubs">Configuring Notification Hubs<a class="headerlink" href="#configuring-notification-hubs" title="Permanent link">&para;</a></h2>
<p>Our first step is to configure our backend.  Thus far, we have implemented an Azure App Service with a SQL Azure
database, and that is our starting point again.  To those resources, we will add the Notification Hub, which starts
just like the addition of any other resource:</p>
<ul>
<li>Log into the <a href="https://portal.azure.com">Azure portal</a>.</li>
<li>Click on the <strong>+ NEW</strong> button in the top right corner (or the <strong>+ ADD</strong> button at the top of your resource group).</li>
<li>Select or search for <strong>Notification Hub</strong>.</li>
<li>
<p>Click on <strong>Create</strong>.</p>
<p><img alt="" src="../img/push-create-2.PNG" /></p>
</li>
<li>
<p>Enter the information required.  You will need to create both a notification hub and a namespace.  I generally
   add the <code>-ns</code> designation to a namespace.</p>
</li>
<li>Click on <strong>Create</strong>.</li>
</ul>
<p>Notification Hubs has three tiers which give you increasing numbers of pushes, plus additional features.  The
<em>Free</em> tier provides just push services.  The <em>Basic</em> tier gives you the more pushes plus the opportunity to 
buy additional pushes. Telemetry, scheduled push and multi-tenancy are only provided in the <em>Standard</em> tier,
which should be your choice for production workloads.</p>
<p>When considering architecture, you should use one Notification Hub per mobile backend.  Notification Hub
namespaces are used for deployment grouping.  For example, you might want to give a different namespace to
each tenant in a multi-tenant environment.</p>
<p>Once your notification hub has been created, you will see both the hub and the namespace listed in your
resource group.  Note that we have not actually linked the notification hub to any platform notification
services yet.  We will do that later.</p>
<h2 id="configuring-push-registration">Configuring Push Registration<a class="headerlink" href="#configuring-push-registration" title="Permanent link">&para;</a></h2>
<p>Push registration is generally handled by the mobile backend, and there is a feature of the App Service
for this purpose.  Although it is possible, resist trying to get mobile clients to register with the
notification hub directly.</p>
<ul>
<li>Log into the <a href="https://portal.azure.com">Azure portal</a>.</li>
<li>Select your mobile backend.</li>
<li>Click on <strong>Push</strong> (under the <strong>SETTINGS</strong> menu).</li>
<li>Click on <strong>Connect</strong>.</li>
<li>Select the notification hub you created earlier.</li>
<li>Wait for the notification hub to be connected (it takes approximately 10 seconds).</li>
</ul>
<p><img alt="" src="../img/push-create-3.PNG" /></p>
<p>You can now decide which tags are valid for this application.  The mobile client will request a list
of tags.  The push registration service will use this information to register the appropriate tags
with the notification hub.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The process is called push registration, but the entity that is created in notification hubs is
called an <strong>Installation</strong>.</p>
</div>
<p>There are two types of tags.  Client requested tags may be requested by the mobile client during the 
registration process.  Automatically added tags are added by the mobile backend.  Let's take an example.
My mobile backend is connected to Azure Active Directory.   I've configured my backend as follows:</p>
<p><img alt="" src="../img/push-create-4.PNG" /></p>
<p>Here, I have three client requested tags and two automatically generated tags that are only added when
authenticated.  Let's suppose that the mobile client requested <code>[ topic:World topic:Sports ]</code> and the
mobile client was authenticated as username <code>user@foo.com</code>, and was a member of the Sales group and the
Managers group.  With this configuration, the user would be registered for the following tags:</p>
<ul>
<li>topic:Sports</li>
<li>auto:Sales</li>
<li>auto:Managers</li>
<li>auto:user@foo.com</li>
</ul>
<p>The topic:Politics and topic:News tags would not be added because the user did not request them.  The topic:World
tag would not be added because it is not in the allowed list of client-requested tags.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>We never provide the ability to request any tag (a wild-card) because it is a large security hole.  With a 
wild-card tag, you could request push notifications for a user or group to which you were not allowed.</p>
</div>
<p>The <code>$(claim)</code> format is used in automatically added tags to add claims from the authenticated user into the
notification hub installation.  You can use any claim that is returned by the <code>/.auth/me</code> endpoint.  The
standard identifiers are:</p>
<ul>
<li>$(emailaddress)</li>
<li>$(identityprovider)</li>
<li>$(name)</li>
<li>$(user_id)</li>
</ul>
<p>The list is different for each provider and additional claims may be available.  It is possible to configure
Azure AD to return groups, for example.  Check the output of the  <code>/.auth/me</code> endpoint to determine which 
claims are available.</p>
<p>Once you have configure the tags, click on <strong>Save</strong> to save your work.</p>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Each push notification system is different and requires different configuration in both the mobile client
and backend registration system.  You can jump directly to a specific platform:</p>
<ul>
<li><a href="../android/">Android</a>.</li>
<li><a href="../ios/">iOS</a>.</li>
<li><a href="../windows/">Windows</a>.</li>
</ul>
<!-- Images -->

<!-- Links -->
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../../chapter4/recipes/" title="Recipes">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Recipes
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../android/" title="Android Push">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Android Push
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = 'adrianhall/develop-mobile-apps-with-csharp-and-azure';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
      <script src="../../js/highlight.pack.js"></script>
    
    
  </body>
</html>