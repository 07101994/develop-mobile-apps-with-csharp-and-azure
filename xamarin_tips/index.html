
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/xamarin_tips/">
      
      
        <meta name="author" content="Adrian Hall">
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.1, mkdocs-material-1.2.0">
    
    
      
        <title>Xamarin Forms Tips - Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure</title>
      
    
    
      <script src="../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-e17eeafcbc.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-892b79c5c5.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/vs.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="red" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href=".." title="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Xamarin Forms Tips
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Chapter 1 - Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Chapter 1 - Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter1/firstapp_pc/" title="Your First App - PC Edition" class="md-nav__link">
      Your First App - PC Edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter1/firstapp_mac/" title="Your First App - Mac Edition" class="md-nav__link">
      Your First App - Mac Edition
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Chapter 2 - Authentication
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Chapter 2 - Authentication
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter2/authconcepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter2/backend/" title="Authentication in the Backend" class="md-nav__link">
      Authentication in the Backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter2/enterprise/" title="Enterprise Authentication" class="md-nav__link">
      Enterprise Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter2/social/" title="Social Authentication" class="md-nav__link">
      Social Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter2/debugging/" title="Debugging Authentication" class="md-nav__link">
      Debugging Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter2/custom/" title="Custom Authentication" class="md-nav__link">
      Custom Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter2/authorization/" title="Claims and Authorization" class="md-nav__link">
      Claims and Authorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter2/realworld/" title="Tokens in Real Apps" class="md-nav__link">
      Tokens in Real Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter2/bestpractices/" title="Best Practices" class="md-nav__link">
      Best Practices
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Chapter 3 - Data Access and Offline Sync
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Chapter 3 - Data Access and Offline Sync
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter3/dataconcepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter3/server/" title="Implementing Table Controllers" class="md-nav__link">
      Implementing Table Controllers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter3/projection/" title="Data Projection and Queries" class="md-nav__link">
      Data Projection and Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter3/client/" title="The Mobile Client" class="md-nav__link">
      The Mobile Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter3/relationships/" title="Relationships" class="md-nav__link">
      Relationships
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter3/domainmgr/" title="The Domain Manager" class="md-nav__link">
      The Domain Manager
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Chapter 4 - Server Side Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Chapter 4 - Server Side Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter4/options/" title="Options for Server Code" class="md-nav__link">
      Options for Server Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter4/custom/" title="Custom HTTP Endpoints" class="md-nav__link">
      Custom HTTP Endpoints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter4/webjobs/" title="WebJobs" class="md-nav__link">
      WebJobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter4/functions/" title="Functions" class="md-nav__link">
      Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter4/recipes/" title="Recipes" class="md-nav__link">
      Recipes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Chapter 5 - Push Notifications
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Chapter 5 - Push Notifications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter5/concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter5/android/" title="Android Push" class="md-nav__link">
      Android Push
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter5/ios/" title="iOS Push" class="md-nav__link">
      iOS Push
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter5/windows/" title="Windows Push" class="md-nav__link">
      Windows Push
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter5/recipes/" title="Push Recipes" class="md-nav__link">
      Push Recipes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Chapter 6 - Combining Web and Mobile Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Chapter 6 - Combining Web and Mobile Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter6/mvc/" title="MVC Applications" class="md-nav__link">
      MVC Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter6/jquery/" title="jQuery Applications" class="md-nav__link">
      jQuery Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter6/angular/" title="Angular Applications" class="md-nav__link">
      Angular Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter6/react/" title="React Applications" class="md-nav__link">
      React Applications
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Chapter 7 - Other Useful Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Chapter 7 - Other Useful Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter7/services/" title="Useful Azure Services" class="md-nav__link">
      Useful Azure Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter7/search/" title="Azure Search" class="md-nav__link">
      Azure Search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter7/media/" title="Media Services" class="md-nav__link">
      Media Services
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Chapter 8 - Developing An App
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Chapter 8 - Developing An App
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter8/developing/" title="The Development Environment" class="md-nav__link">
      The Development Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter8/testing/" title="Testing your Application" class="md-nav__link">
      Testing your Application
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Chapter 9 - Going to Production
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Chapter 9 - Going to Production
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter9/arm/" title="Repeatable Deployments" class="md-nav__link">
      Repeatable Deployments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter9/appsvc/" title="Safe Deployments" class="md-nav__link">
      Safe Deployments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chapter9/monitoring/" title="Monitoring and Troubleshooting" class="md-nav__link">
      Monitoring and Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Xamarin Forms Tips
      </label>
    
    <a href="./" title="Xamarin Forms Tips" class="md-nav__link md-nav__link--active">
      Xamarin Forms Tips
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#improve-your-listview-performance" title="Improve your ListView performance" class="md-nav__link">
    Improve your ListView performance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-a-floating-action-button" title="Build a Floating Action Button" class="md-nav__link">
    Build a Floating Action Button
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#work-with-a-picker-in-a-viewmodel" title="Work with a Picker in a ViewModel" class="md-nav__link">
    Work with a Picker in a ViewModel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-nuget-packages-in-multiple-projects" title="Install NuGet Packages in Multiple Projects" class="md-nav__link">
    Install NuGet Packages in Multiple Projects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-deploy-universal-windows-apps" title="Auto-Deploy Universal Windows Apps" class="md-nav__link">
    Auto-Deploy Universal Windows Apps
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../android_appendix/" title="Android Developer Notes" class="md-nav__link">
      Android Developer Notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../vs_extensions/" title="Visual Studio Extensions" class="md-nav__link">
      Visual Studio Extensions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../references/" title="References" class="md-nav__link">
      References
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../credits/" title="Credits" class="md-nav__link">
      Credits
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#improve-your-listview-performance" title="Improve your ListView performance" class="md-nav__link">
    Improve your ListView performance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-a-floating-action-button" title="Build a Floating Action Button" class="md-nav__link">
    Build a Floating Action Button
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#work-with-a-picker-in-a-viewmodel" title="Work with a Picker in a ViewModel" class="md-nav__link">
    Work with a Picker in a ViewModel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-nuget-packages-in-multiple-projects" title="Install NuGet Packages in Multiple Projects" class="md-nav__link">
    Install NuGet Packages in Multiple Projects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-deploy-universal-windows-apps" title="Auto-Deploy Universal Windows Apps" class="md-nav__link">
    Auto-Deploy Universal Windows Apps
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
                 <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/edit/master/docs/xamarin_tips.md" title="Edit this page" class="md-icon md-content__edit">edit</a>
               
              
                
                <h1 id="xamarin-forms-tips">Xamarin Forms Tips<a class="headerlink" href="#xamarin-forms-tips" title="Permanent link">&para;</a></h1>
<p>Over the many months I have spent coding Xamarin Forms, a number of people
from the community and the Xamarin team have given me little tips to improve
my Xamarin Forms code.  I hope you find them as useful as I did.</p>
<h2 id="improve-your-listview-performance">Improve your ListView performance<a class="headerlink" href="#improve-your-listview-performance" title="Permanent link">&para;</a></h2>
<p>It should be no surprise that performance matters.  Little things like smooth
scrolling and fast load times are a must.  A lot of improvement can be gained
by the techniques we have shown in this book since most of the perceived delays
are caused by the back end loading times.</p>
<p>Eventually, a lot of apps generate a list.  The normal way for implementing
this is with a <code>ListView</code> that has an <code>ObservableCollection</code>  You load your
data into the ObservableCollection and then update that whenever the data
changes.  That, in turn, updates the ListView.</p>
<p>There are two problems that are inherent here.  The first is in the ObservableCollection
and the second is in the ListView.  Let's tackle the ObservableCollection first.</p>
<p>The problem with the ObservableCollection is that it's very hard to update.
What normally ends up happening is code like this:</p>
<pre><code class="csharp">// Earlier in the code
var listContents = new ObservableCollection&lt;Model&gt;();

// When updating the code
var items = await table.ReadAllItemsAsync();
listContents.Clear();
for (var item in items) {
    listContents.Add(item);
}
</code></pre>

<p>The point of the ObservableCollection is that it emits an event whenever the
list changes.  In the case where the table has thousands of entries, thousands
of events will cause thousands of redraws, causing a major slow down in your
code that you probably won't know until you have a large enough data set to
note the problem.</p>
<p>Fortunately, one of the top Xamarin Evangelists, <a href="https://github.com/jamesmontemagno">James Montemagno</a>, has
created a set of helper classes that assist with this sort of problem.  The
solution to this problem is to use the <a href="https://github.com/jamesmontemagno/mvvm-helpers/blob/35f0ddd7e739eb5daed3c90cae1334d3e674229b/MvvmHelpers/ObservableRangeCollection.cs">ObservableRangeCollection</a>, like
this:</p>
<pre><code class="csharp">// Earlier in the code
var listContents = new ObservableRangeCollection&lt;Model&gt;();

// When updating the code
var items = await table.ReadAllItemsAsync();
listContents.ReplaceRange(items);
</code></pre>

<p>With this code, Xamarin Forms gets notified once instead of thousands of times.
There are actually several versions of this same behavior in the NuGet repository.</p>
<p>As to the second problem.  A <code>ListView</code> with thousands of items will not be
showing all the items at once.  A ListView will update all the items that have
been updated, irrespective of whether they are visible or not.  The answer is
to use a caching strategy.  There are two potential caching strategies.  with
<code>RetainElement</code>, the ListView will generate a cell for each item in the list.
This is the default, but it's really only good for certain situations (most
notably when the cell has a large number of bindings).  For almost all situations,
the <code>RecycleElement</code> caching strategy should be used.  In this caching strategy,
the ListView will minimize the memory foot print and execution speed by only
updating cells when they are in the viewable area.  This is good pretty much
all the time, but explicitly when the cell has a small number of bindings or
when each cell in the list has the same template.  All data about the cell must
come from the binding context when using the <code>RecycleElement</code> caching strategy.</p>
<p>You can set the caching strategy right in the XAML:</p>
<pre><code class="xml">&lt;ListView CachingStrategy=&quot;RecycleElement&quot; ...&gt;
</code></pre>

<p>Alternatively, if you are creating a ListView in code, you can specify the
caching strategy in the constructor:</p>
<pre><code class="csharp">var listView = new ListView(ListViewCachingStrategy.RecycleElement);
</code></pre>

<p>There are more techniques for improving ListView performance in the
<a href="https://developer.xamarin.com/guides/xamarin-forms/user-interface/listview/performance/">Xamarin documentation</a></p>
<h2 id="build-a-floating-action-button">Build a Floating Action Button<a class="headerlink" href="#build-a-floating-action-button" title="Permanent link">&para;</a></h2>
<p>One of the things that I wanted to do to my apps was to give them a little more in the
way of normal UI design.  My original design (which I introduced back in [Chapter ][ch1])
had teal buttons at the bottom of the page.  These buttons scrolled off the page when
there were more items on the page than could reasonably be fit on the page.  To fix this,
I wanted to create a button that was always relative to the viewport.</p>
<p>There are two steps to this.  Firstly, you need to convert the layout to a <code>RelativeLayout</code>.
For instance, my new <code>ListView.xaml</code> file:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ContentPage x:Class=&quot;TaskList.Pages.TaskList&quot;
             xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             Title=&quot;{Binding Title}&quot;&gt;
    &lt;ContentPage.Content&gt;
        &lt;RelativeLayout&gt;
            &lt;StackLayout RelativeLayout.HeightConstraint=&quot;{ConstraintExpression Type=RelativeToParent, Property=Height, Factor=1}&quot;
                         RelativeLayout.WidthConstraint=&quot;{ConstraintExpression Type=RelativeToParent, Property=Width, Factor=1}&quot;&gt;
</code></pre>

<p>The original <code>StackLayout</code> layout renderer is placed inside the newly added <code>RelativeLayout</code>.
The height and width constraints tell the StackLayout to consume the whole screen.</p>
<p>At the bottom of the page, I can add my button:</p>
<pre><code class="xml">            &lt;/StackLayout&gt;

            &lt;!--  The Floating Button  --&gt;
            &lt;Button BackgroundColor=&quot;Teal&quot;
                    Command=&quot;{Binding AddNewItemCommand}&quot;
                    RelativeLayout.XConstraint=&quot;{ConstraintExpression Type=RelativeToParent,
                                                                      Property=Width,
                                                                      Factor=1,
                                                                      Constant=-60}&quot;
                    RelativeLayout.YConstraint=&quot;{ConstraintExpression Type=RelativeToParent,
                                                                      Property=Height,
                                                                      Factor=1,
                                                                      Constant=-60}&quot;
                    Text=&quot;+&quot;
                    TextColor=&quot;White&quot; /&gt;
        &lt;/RelativeLayout&gt;
    &lt;/ContentPage.Content&gt;
&lt;/ContentPage&gt;
</code></pre>

<p>The <code>StackLayout</code> is the end of the StackLayout I introduced in the previous listing.  Now
I can add a button (or any other View type control, including a custom control that I may
have downloaded from NuGet or the Xamarin Plugins site) as well.  The button will float
above the other content since it is added later.  The constraints in this case provide
the location of the button.</p>
<p>There is more work to do.  For instance, you cannot click on the thing behind the button -
the button always receives the click, which will (in this case) initiate the addition of
a new item.  A custom control will allow you to provide iconography for the button, handle
situations where you want to scroll behind and provide for the circular styling of the button
which seems to be in-vogue right now.</p>
<p>If you want to place commands that are not normally used, you may want to consider the ToolbarItem
area of the ContentPage.  Here is a snippet:</p>
<pre><code class="xml">    &lt;ContentPage.ToolbarItems&gt;
        &lt;ToolbarItem Name=&quot;Refresh&quot;
                     Command=&quot;{Binding RefreshCommand}&quot;
                     Icon=&quot;refresh.png&quot;
                     Order=&quot;Primary&quot;
                     Priority=&quot;0&quot; /&gt;
    &lt;/ContentPage.ToolbarItems&gt;
</code></pre>

<p>On Universal Windows (where this is actually important due to a lack of "pull-to-refresh" logic), you
will see the familiar triple-dot on the app bar - clicking on the triple dot gives you access to
the refresh command.</p>
<h2 id="work-with-a-picker-in-a-viewmodel">Work with a Picker in a ViewModel<a class="headerlink" href="#work-with-a-picker-in-a-viewmodel" title="Permanent link">&para;</a></h2>
<p>There are some controls that do not work well with a <code>BindingContext</code>.  One of these is the <code>Picker</code>.
It has a number of Items that indicate the elements in the drop-down.   However, the Items are not
bindable, which means that they cannot be accessed via a ViewModel.</p>
<p>Let's say you wish to use the drop-down Picker from a view model and use an async command to update
the elements in the Picker.  In the XAML file, give your picker a name:</p>
<pre><code class="xml">&lt;Picker x:Name=&quot;myPicker&quot; /&gt;
</code></pre>

<p>This makes <code>myPicker</code> a private variable in the generated class.  You can use this in the XAML 
code-behind file to pass the picker to your view-model by overriding the <code>OnBindingContextChanged</code>
method:</p>
<pre><code class="csharp">protected override void OnBindingContextChanged()
{
    base.OnBindingContextChanged();

    MyViewModel vm = BindingContext as MyViewModel;
    if (vm != null)
    {
        vm.MyPicker = myPicker;
        vm.RefreshPickerCommand.Execute(null);
    }
}
</code></pre>

<p>In your view-model, you can create a standard async command:</p>
<pre><code class="csharp">async Task RefreshPickerAsync()
{
    if (MyPicker.Items.Count == 0)
    {
        /* This section gets the list of items in the picker */
        var table = await CloudService.GetTableAsync&lt;Tag&gt;();
        var tags = await tagTable.ReadAllItemsAsync();

        /* This section updates MyPicker with the items */
        foreach (var item in tags)
        {
            MyPicker.Items.Add(item.TagName);
            // You may want to do a test for something in your item
            // here and set SelectedIndex to the index if it matches
        }
    }
}
</code></pre>

<p>The <code>RefreshPickerAsync()</code> command gets executed when the binding context is updated, which means the
XAML has been executed and bound (thus the myPicker variable is set to the picker).  </p>
<p>Another way to accomplish this would be to encapsulate a picker in a custom control that does have a
bindable Items element.  This has been discussed on the <a href="https://forums.xamarin.com/discussion/30801/xamarin-forms-bindable-picker">Xamarin Forums</a>.</p>
<h2 id="install-nuget-packages-in-multiple-projects">Install NuGet Packages in Multiple Projects<a class="headerlink" href="#install-nuget-packages-in-multiple-projects" title="Permanent link">&para;</a></h2>
<p>One of the common requirements we have in Xamarin Forms is to install NuGet packages
in all the Xamarin Forms projects.  To do this, right-click on the solution and select
<strong>Manage NuGet Packages for Solution...</strong>.  When you install a package here, you can
select which projects it should be applied to, allowing you to install a package once
across all the dependent projects.</p>
<h2 id="auto-deploy-universal-windows-apps">Auto-Deploy Universal Windows Apps<a class="headerlink" href="#auto-deploy-universal-windows-apps" title="Permanent link">&para;</a></h2>
<p>One of the more annoying things is that you have to <strong>Deploy</strong> the Universal Windows app.
This gets in the way of the build process.  I like to build then run.  Having the extra
Deploy step in there might not seem like much until you find yourself deploying several
times an hour.</p>
<p>Fortunately, there is a simple fix for this.  Set up the <strong>Configuration Manager</strong> to
automatically deploy the right libraries on every successful build.  To do this:</p>
<ul>
<li>In Visual Studio, select <strong>Build</strong> -&gt; <strong>Configuration Manager...</strong></li>
<li>Check the boxes you can under <strong>Deploy</strong></li>
</ul>
<p><img alt="Visual Studio Configuration Manager" src="../img/tips/vs-config-mgr.PNG" /></p>
<ul>
<li>Click on <strong>Close</strong></li>
</ul>
<p>This setting is saved within the solution, so you only need to do it once per project.</p>
              
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../chapter9/monitoring/" title="Monitoring and Troubleshooting" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Monitoring and Troubleshooting
              </span>
            </div>
          </a>
        
        
          <a href="../android_appendix/" title="Android Developer Notes" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Android Developer Notes
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 Adrian Hall
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/adrianhall" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/FizzyInTheHall" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-30ac6a1727.js"></script>
      <script>app.initialize({url:{base:".."}})</script>
      
        <script src="../js/highlight.pack.js"></script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-93366112-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>